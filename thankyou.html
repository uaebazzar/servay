<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Thank You</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
body { font-family:'Inter',sans-serif; background:#111; color:#fff; display:flex; justify-content:center; align-items:center; min-height:100vh; margin:0;}
.container { background:#1e1e1e; padding:50px 40px; border-radius:16px; width:100%; max-width:480px; box-shadow:0 10px 30px rgba(0,0,0,0.6);}
h1{text-align:center;font-size:1.6em;margin-bottom:20px;font-weight:600;color:#fff;}
h2{text-align:center;font-size:1.3em;margin-bottom:15px;color:#0f0;}
#total{text-decoration:underline;}
ul{list-style:none;padding:0;margin-top:20px;}
li{padding:8px 0;border-bottom:1px solid #333;}
.info{text-align:center;font-size:0.85em;color:#888;margin-top:15px;}
</style>
</head>
<body>
<div class="container">
  <h1>Thank You for Submitting!</h1>
  <h2>Total users submitted: <span id="total">0</span></h2>
  <ul id="userList"></ul>
  <div class="info">See who else has submitted! Your response is public.</div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyDLoLAI1zymsLevD8r0gew5qT43JhIHUFk",
  authDomain: "servay-3ba5c.firebaseapp.com",
  databaseURL: "https://servay-3ba5c-default-rtdb.firebaseio.com",
  projectId: "servay-3ba5c",
  storageBucket: "servay-3ba5c.appspot.com",
  messagingSenderId: "743054579294",
  appId: "1:743054579294:web:3db015ed9d78f7bf2006cf",
  measurementId: "G-EHSNE706DR"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const totalEl = document.getElementById('total');
const userList = document.getElementById('userList');
const submissionsRef = ref(db, 'submissions');

// Real-time listener
onValue(submissionsRef, (snapshot)=>{
  const data = snapshot.val();
  const users = data ? Object.values(data) : [];
  totalEl.textContent = users.length;

  userList.innerHTML = '';
  users.forEach(u=>{
    const li = document.createElement('li');
    li.textContent = u.name + " - " + u.appType;
    userList.appendChild(li);
  });
});
</script>
</body>
</html>
